<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Landing Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 flex items-center justify-center h-screen">

    <!-- Contenedor principal -->
    <div class="w-full max-w-md p-8 space-y-6 bg-white shadow-lg rounded-lg">
        <!-- Buscador -->
        <div>
            <label for="reference" class="block text-lg font-medium text-gray-700">Buscar Referencia</label>
            <input type="text" id="reference" placeholder="Ej: 001" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
            <button onclick="loadForm()" class="w-full mt-4 bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 focus:outline-none focus:bg-blue-600">Cargar Formulario</button>
        </div>

        <!-- Contenedor para mostrar el formulario -->
        <div id="formContainer" class="hidden mt-6 space-y-4"></div>

        <!-- Botón para enviar datos -->
        <button onclick="sendDataToSheet()" class="w-full mt-4 bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 focus:outline-none focus:bg-green-600">Enviar Datos</button>
    </div>

    <!-- Script JavaScript -->
    <script>
        const formsByCategory = {
            "001": {
                name: "Notebooks",
                fields: [
                    { name: "modelo", label: "Modelo", type: "text" },
                    { name: "procesador", label: "Procesador", type: "text" },
                    { name: "ram", label: "Memoria RAM", type: "text" },
                    { name: "almacenamiento", label: "Almacenamiento", type: "text" },
                    { name: "pantalla", label: "Pantalla", type: "text" },
                    { name: "graficos", label: "Gráficos", type: "text" },
                    { name: "conectividad", label: "Conectividad", type: "text" },
                    { name: "puertos", label: "Puertos", type: "text" },
                    { name: "bateria", label: "Batería", type: "text" },
                    { name: "dimensiones", label: "Dimensiones", type: "text" },
                    { name: "Peso", label: "peso", type: "text" },
                    { name: "SO", label: "Sistema Operativo", type: "text" },
                    { name: "garantia", label: "Garantía", type: "text" }
                    
                ]
            },
            "002": {
                name: "Impresoras",
                fields: [
                    { name: "tipo", label: "Tipo", type: "text" },
                    { name: "marca", label: "Marca", type: "text" },
                    { name: "conectividad", label: "Conectividad", type: "text" },
                    { name: "color", label: "Color o Blanco y Negro", type: "text" }
                ]
            }
            // Agrega más categorías según sea necesario
        };

        function loadForm() {
            const reference = document.getElementById("reference").value;
            const formContainer = document.getElementById("formContainer");

            // Limpiar el contenedor de formulario anterior
            formContainer.innerHTML = "";

            // Verificar si la referencia coincide con alguna categoría
            if (formsByCategory[reference]) {
                const category = formsByCategory[reference];
                
                // Crear título de la categoría
                const title = document.createElement("h2");
                title.className = "text-xl font-bold text-gray-800";
                title.innerText = `Formulario para ${category.name}`;
                formContainer.appendChild(title);

                // Crear campos específicos del formulario
                category.fields.forEach(field => {
                    const fieldWrapper = document.createElement("div");
                    fieldWrapper.className = "mt-4";
                    
                    const label = document.createElement("label");
                    label.className = "block text-sm font-medium text-gray-700";
                    label.innerText = field.label;
                    fieldWrapper.appendChild(label);

                    const input = document.createElement("input");
                    input.type = field.type;
                    input.name = field.name;
                    input.className = "mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm";
                    fieldWrapper.appendChild(input);

                    formContainer.appendChild(fieldWrapper);
                });

                // Mostrar el contenedor del formulario
                formContainer.classList.remove("hidden");
            } else {
                formContainer.innerHTML = `<p class="text-red-500">Categoría no encontrada.</p>`;
                formContainer.classList.remove("hidden");
            }
        }

        function sendDataToSheet() {
            const reference = document.getElementById("reference").value;
            const data = {
                reference: reference,
                fields: {}
            };

            // Agregar los valores de los campos al objeto data.fields con sus nombres correspondientes
            document.querySelectorAll("#formContainer input").forEach((input) => {
                data.fields[input.name] = input.value; // Usar el atributo `name` como clave y el valor ingresado como valor
            });

            // Enviar los datos al webhook de Make
            fetch("https://hook.us2.make.com/7zut8la65mpmialu9kpfbt2hhzem3rax", {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
            .then(response => {
                if (response.ok) {
                    alert("Datos enviados exitosamente.");
                } else {
                    alert("Error al enviar los datos.");
                }
            })
            .catch(error => {
                console.error("Error:", error);
                alert("Error al enviar los datos.");
            });
        }
    </script>
</body>
</html>
